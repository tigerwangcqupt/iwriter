<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.yryz.writer.modules.writer.dao.persistence.WriterDao">

	<!--BaseResultMap-->
    <resultMap id="BaseResultMap" type="com.yryz.writer.modules.writer.entity.Writer">
		<id column="id" property="id" jdbcType="BIGINT"/>
		<result column="kid" property="kid" jdbcType="BIGINT"/>
		<result column="account" property="account" jdbcType="VARCHAR"/>
		<result column="pwd" property="pwd" jdbcType="VARCHAR"/>
		<result column="nick_name" property="nickName" jdbcType="VARCHAR"/>
		<result column="head_img" property="headImg" jdbcType="VARCHAR"/>
		<result column="phone" property="phone" jdbcType="VARCHAR"/>
		<result column="user_name" property="userName" jdbcType="VARCHAR"/>
		<result column="identity_card" property="identityCard" jdbcType="VARCHAR"/>
		<result column="identity_card_photo" property="identityCardPhoto" jdbcType="VARCHAR"/>
		<result column="provice" property="provice" jdbcType="VARCHAR"/>
		<result column="city" property="city" jdbcType="VARCHAR"/>
		<result column="tel" property="tel" jdbcType="VARCHAR"/>
		<result column="email" property="email" jdbcType="VARCHAR"/>
		<result column="user_status" property="userStatus" jdbcType="TINYINT"/>
		<result column="device_id" property="deviceId" jdbcType="VARCHAR"/>
		<result column="jpush_registration_id" property="jpushRegistrationId" jdbcType="VARCHAR"/>
		<result column="create_date" property="createDate" jdbcType="TIMESTAMP"/>
		<result column="create_user_id" property="createUserId" jdbcType="VARCHAR"/>
		<result column="last_update_date" property="lastUpdateDate" jdbcType="TIMESTAMP"/>
		<result column="last_update_user_id" property="lastUpdateUserId" jdbcType="VARCHAR"/>
    </resultMap>
	
	<!--Base_Column_List-->
	<sql id="Base_Column_List">id,kid,account,pwd,nick_name,head_img,phone,user_name,identity_card,identity_card_photo,provice,city,tel,email,user_status,device_id,jpush_registration_id,create_date,create_user_id,last_update_date,last_update_user_id
    </sql>

     <!-- 查询Writer详情 -->
    <select id="selectByKid" resultMap="BaseResultMap" parameterType="java.lang.Long">
        select
        <include refid="Base_Column_List"/>
        from yryz_writer
        where kid = #{kid,jdbcType=BIGINT}
    </select>
    
    <!-- 删除Writer-->
    <delete id="delete" parameterType="java.lang.Long">
        update yryz_writer
        set del_flag = 1
        where kid = #{kid,jdbcType=BIGINT}
    </delete>
  
  
  	<!-- 新增Writer-->
    <insert id="insert"  parameterType="com.yryz.writer.modules.writer.entity.Writer">
	    insert into yryz_writer (kid,account,pwd,nick_name,head_img,phone,user_name,identity_card,identity_card_photo,provice,city,tel,email,user_status,device_id,jpush_registration_id,create_date,create_user_id,last_update_date,last_update_user_id)
	    values (
	    	#{kid,jdbcType=BIGINT}
				,#{account,jdbcType=VARCHAR}
				,#{pwd,jdbcType=VARCHAR}
				,#{nickName,jdbcType=VARCHAR}
				,#{headImg,jdbcType=VARCHAR}
				,#{phone,jdbcType=VARCHAR}
				,#{userName,jdbcType=VARCHAR}
				,#{identityCard,jdbcType=VARCHAR}
				,#{identityCardPhoto,jdbcType=VARCHAR}
				,#{provice,jdbcType=VARCHAR}
				,#{city,jdbcType=VARCHAR}
				,#{tel,jdbcType=VARCHAR}
				,#{email,jdbcType=VARCHAR}
				,#{userStatus,jdbcType=TINYINT}
				,#{deviceId,jdbcType=VARCHAR}
				,#{jpushRegistrationId,jdbcType=VARCHAR}
			,NOW()
				,#{createUserId,jdbcType=VARCHAR}
			,NOW()
				,#{lastUpdateUserId,jdbcType=VARCHAR}
	    )
	</insert>
	
	<!--按需新增Writer-->
    <insert id="insertByPrimaryKeySelective"   parameterType="com.yryz.writer.modules.writer.entity.Writer">
	    insert into yryz_writer 
	    <trim prefix="(" suffix=")" suffixOverrides=",">
        <if test="kid != null">
			kid,
	    </if>
        <if test="account != null and account != ''">
			account,
	    </if>
        <if test="pwd != null and pwd != ''">
			pwd,
	    </if>
        <if test="nickName != null and nickName != ''">
			nick_name,
	    </if>
        <if test="headImg != null and headImg != ''">
			head_img,
	    </if>
        <if test="phone != null and phone != ''">
			phone,
	    </if>
        <if test="userName != null and userName != ''">
			user_name,
	    </if>
        <if test="identityCard != null and identityCard != ''">
			identity_card,
	    </if>
        <if test="identityCardPhoto != null and identityCardPhoto != ''">
			identity_card_photo,
	    </if>
        <if test="provice != null and provice != ''">
			provice,
	    </if>
        <if test="city != null and city != ''">
			city,
	    </if>
        <if test="tel != null and tel != ''">
			tel,
	    </if>
        <if test="email != null and email != ''">
			email,
	    </if>
        <if test="userStatus != null">
			user_status,
	    </if>
        <if test="deviceId != null and deviceId != ''">
			device_id,
	    </if>
        <if test="jpushRegistrationId != null and jpushRegistrationId != ''">
			jpush_registration_id,
	    </if>
        <if test="createDate != null">
			create_date,
	    </if>
        <if test="createUserId != null and createUserId != ''">
			create_user_id,
	    </if>
        <if test="lastUpdateDate != null">
			last_update_date,
	    </if>
        <if test="lastUpdateUserId != null and lastUpdateUserId != ''">
			last_update_user_id,
	    </if>
	    </trim>
	    <trim prefix="values (" suffix=")" suffixOverrides=",">
        <if test="kid != null">
			#{kid,jdbcType=BIGINT},
	    </if>
        <if test="account != null and account != ''">
			#{account,jdbcType=VARCHAR},
	    </if>
        <if test="pwd != null and pwd != ''">
			#{pwd,jdbcType=VARCHAR},
	    </if>
        <if test="nickName != null and nickName != ''">
			#{nickName,jdbcType=VARCHAR},
	    </if>
        <if test="headImg != null and headImg != ''">
			#{headImg,jdbcType=VARCHAR},
	    </if>
        <if test="phone != null and phone != ''">
			#{phone,jdbcType=VARCHAR},
	    </if>
        <if test="userName != null and userName != ''">
			#{userName,jdbcType=VARCHAR},
	    </if>
        <if test="identityCard != null and identityCard != ''">
			#{identityCard,jdbcType=VARCHAR},
	    </if>
        <if test="identityCardPhoto != null and identityCardPhoto != ''">
			#{identityCardPhoto,jdbcType=VARCHAR},
	    </if>
        <if test="provice != null and provice != ''">
			#{provice,jdbcType=VARCHAR},
	    </if>
        <if test="city != null and city != ''">
			#{city,jdbcType=VARCHAR},
	    </if>
        <if test="tel != null and tel != ''">
			#{tel,jdbcType=VARCHAR},
	    </if>
        <if test="email != null and email != ''">
			#{email,jdbcType=VARCHAR},
	    </if>
        <if test="userStatus != null">
			#{userStatus,jdbcType=TINYINT},
	    </if>
        <if test="deviceId != null and deviceId != ''">
			#{deviceId,jdbcType=VARCHAR},
	    </if>
        <if test="jpushRegistrationId != null and jpushRegistrationId != ''">
			#{jpushRegistrationId,jdbcType=VARCHAR},
	    </if>
        <if test="createDate != null">
			#{createDate,jdbcType=TIMESTAMP},
	    </if>
        <if test="createUserId != null and createUserId != ''">
			#{createUserId,jdbcType=VARCHAR},
	    </if>
        <if test="lastUpdateDate != null">
			#{lastUpdateDate,jdbcType=TIMESTAMP},
	    </if>
        <if test="lastUpdateUserId != null and lastUpdateUserId != ''">
			#{lastUpdateUserId,jdbcType=VARCHAR},
	    </if>
	    </trim>
	</insert>
	
	
	<!-- 按需修改Writer-->   
    <update id="update" parameterType="com.yryz.writer.modules.writer.entity.Writer">
        update yryz_writer
        <set>
            <if test="account != null and account != ''">
    			account = #{account,jdbcType=VARCHAR},
    		</if>
            <if test="pwd != null and pwd != ''">
    			pwd = #{pwd,jdbcType=VARCHAR},
    		</if>
            <if test="nickName != null and nickName != ''">
    			nick_name = #{nickName,jdbcType=VARCHAR},
    		</if>
            <if test="headImg != null and headImg != ''">
    			head_img = #{headImg,jdbcType=VARCHAR},
    		</if>
            <if test="phone != null and phone != ''">
    			phone = #{phone,jdbcType=VARCHAR},
    		</if>
            <if test="userName != null and userName != ''">
    			user_name = #{userName,jdbcType=VARCHAR},
    		</if>
            <if test="identityCard != null and identityCard != ''">
    			identity_card = #{identityCard,jdbcType=VARCHAR},
    		</if>
            <if test="identityCardPhoto != null and identityCardPhoto != ''">
    			identity_card_photo = #{identityCardPhoto,jdbcType=VARCHAR},
    		</if>
            <if test="provice != null and provice != ''">
    			provice = #{provice,jdbcType=VARCHAR},
    		</if>
            <if test="city != null and city != ''">
    			city = #{city,jdbcType=VARCHAR},
    		</if>
            <if test="tel != null and tel != ''">
    			tel = #{tel,jdbcType=VARCHAR},
    		</if>
            <if test="email != null and email != ''">
    			email = #{email,jdbcType=VARCHAR},
    		</if>
             <if test="userStatus != null">
    			user_status = #{userStatus,jdbcType=TINYINT},
    		</if>
            <if test="deviceId != null and deviceId != ''">
    			device_id = #{deviceId,jdbcType=VARCHAR},
    		</if>
            <if test="jpushRegistrationId != null and jpushRegistrationId != ''">
    			jpush_registration_id = #{jpushRegistrationId,jdbcType=VARCHAR},
    		</if>
             <if test="createDate != null">
    			create_date = #{createDate,jdbcType=TIMESTAMP},
    		</if>
            <if test="createUserId != null and createUserId != ''">
    			create_user_id = #{createUserId,jdbcType=VARCHAR},
    		</if>
             <if test="lastUpdateDate != null">
    			last_update_date = #{lastUpdateDate,jdbcType=TIMESTAMP},
    		</if>
            <if test="lastUpdateUserId != null and lastUpdateUserId != ''">
    			last_update_user_id = #{lastUpdateUserId,jdbcType=VARCHAR},
    		</if>
        </set>
        where kid = #{kid,jdbcType=BIGINT}
    </update>
    
    <!-- 查询Writer列表 -->
    <select id="selectList" parameterType="com.yryz.writer.modules.writer.dto.WriterDto" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from yryz_writer where del_flag = 0
    </select>

	<!-- 查询管理后台Writer列表 -->
	<select id="selectAdminList" parameterType="com.yryz.writer.modules.writer.dto.WriterDto" resultMap="BaseResultMap">
		select
		<include refid="Base_Column_List"/>
		from yryz_writer where 1=1
		<if test="keyWord != null and keyWord != '' ">
			AND nick_name like CONCAT('%',trim(#{keyWord}),'%')
		</if>
	</select>

	<!-- 查询Writer详情 -->
	<select id="selectByPhone" resultMap="BaseResultMap" parameterType="java.lang.String">
		select
		<include refid="Base_Column_List"/>
		from yryz_writer
		where phone = #{phone,jdbcType=VARCHAR}
	</select>
    
</mapper>